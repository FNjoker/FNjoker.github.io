<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Hexo">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Hexo">

    <!--Type page-->
    
        <meta property="og:type" content="website">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>Hexo</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">Hexo</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/08/23/第一周任务/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-23</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="CentOS7安装环境LNMP（PHP7-MySQL5-7-Nginx1-16）"><a href="#CentOS7安装环境LNMP（PHP7-MySQL5-7-Nginx1-16）" class="headerlink" title="CentOS7安装环境LNMP（PHP7+MySQL5.7+Nginx1.16）"></a>CentOS7安装环境LNMP（PHP7+MySQL5.7+Nginx1.16）</h1><h2 id="第一步：安装CentOS7"><a href="#第一步：安装CentOS7" class="headerlink" title="第一步：安装CentOS7"></a>第一步：安装CentOS7</h2><p>​        由于我自己的CentOS是之前安装好的，并没有记载详细的安装步骤，这里这步就不详细描述了。</p>
<h2 id="第二步：安装Nginx"><a href="#第二步：安装Nginx" class="headerlink" title="第二步：安装Nginx"></a>第二步：安装Nginx</h2><p>​        1.修改yum源</p>
<p>​        #yum localinstall <a href="http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm" target="_blank" rel="noopener">http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</a></p>
<pre><code>2.安装Nginx![nginx1](C:\Users\Administrator.WIN-CL4SOICTAKG\Desktop\周任务\第一周任务\nginx1.jpg)</code></pre><p>​        3.启动nginx<img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cnginx3.png" alt="nginx3"></p>
<p>​        4.测试是否安装成功</p>
<p>​        访问自己的ip地址，如果出现如下界面证明成功。    <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cnginx4.png" alt="nginx4"></p>
<p>​        注：查看本机ip地址的方法：使用命令ifconfig.</p>
<h2 id="第三步：安装PHP"><a href="#第三步：安装PHP" class="headerlink" title="第三步：安装PHP"></a>第三步：安装PHP</h2><p>​        1.查看当前系统中是否已经安装了PHP</p>
<p>​        2.有低版本的先将低版本卸载</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CPHP1.png" alt="PHP1"><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CPHP2.png" alt="PHP2"><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CPHP3.png" alt="PHP3"></p>
<p>​        3.安装最新的Remi源自动安装文件</p>
<p>​        yum install <a href="http://rpms.famillecollet.com/enterprise/remi-release-7.rpm" target="_blank" rel="noopener">http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</a></p>
<p>​        4.安装PHP的相关控件</p>
<p>​        这里只举一个例子，其他组件安装方法一样</p>
<p>​        使用命令：yum –enablerepo=remi,remi-php70 install php</p>
<p>​        其他组件如：php-cgi,php-cli,php-fpm,php-common,php-devel,php-mysqlnd,php-sqlite3,php-mbstring,php-msgpack,php-mcrypt,php-bcmath,php-gd,php-xml,php-ldap,php-xmlrpc,php-opcache,php-curl,php-json,php-odbc,php-pdo,php-bz2,php-ftp,php-imap,php-snmp,php-redis,php-mencached</p>
<p>​        5.查看一下当前PHP版本<img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CPHP4.png" alt="PHP4"></p>
<p>​        6.启动并设置开机自启动php-fpm</p>
<p>[root@localhost joker]# systemctl enable php-fpm</p>
<p>[root@localhost joker]# systemctl start php-fpm</p>
<h2 id="第四步：安装mysql"><a href="#第四步：安装mysql" class="headerlink" title="第四步：安装mysql"></a>第四步：安装mysql</h2><p>​        1.卸载mariadb（mariadb是CentOS7自带的数据库）</p>
<p>​        命令：rpm -qa|grep mariadb</p>
<p>​                    rpm -e –nodeps 文件名</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql1.png" alt="mysql1"></p>
<p>​        2.查看服务器上是否已经安装了Mysql,如果有则卸载</p>
<p>​        命令：rpm -e –nodeps 文件名</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql2.png" alt="mysql2"></p>
<p>​        3.在官网上下载rpm文件</p>
<p>​        命令 ：wget <a href="https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm" target="_blank" rel="noopener">https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</a></p>
<p>​        4.安装下载的rpm文件</p>
<p>​        命令：rpm -ivh mysql57-community-release-el7-11.noarch.rpm<img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql3.png" alt="mysql3"></p>
<p>​        5.安装数据库</p>
<p>​        命令：yum install mysql-community-server</p>
<p>​        6.启动mysql服务并获取初始密码        <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql4.png" alt="mysql4"></p>
<p>​        7.登陆mysql</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql5.jpg" alt="mysql5"></p>
<p>​        8.修改初始密码</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cmysql8.png" alt="mysql8"></p>
<p>​        注：mysql5.7默认安装了密码安全检查插件，设置密码的时候必须大写字母，小写字母，数字，特殊符号都有，并且长度不少于8位。</p>
<p>​        9.修改/etc/my.cnf配置文件，配置默认编码为utf8</p>
<p>![mysql6 - 副本](C:\Users\Administrator.WIN-CL4SOICTAKG\Desktop\周任务\第一周任务\mysql6 - 副本.png)</p>
<p>​        10.重启并设置开机自启动</p>
<p>​        命令：systemctl restart mysqld</p>
<p>​                    systemctl enable mysqld</p>
<h2 id="第五步：配置Nginx"><a href="#第五步：配置Nginx" class="headerlink" title="第五步：配置Nginx"></a>第五步：配置Nginx</h2><p>​        1.配置防火墙</p>
<p>​        修改/etc/firewalld/zones/public.xml文件，增加如下一行代码</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cfirewalld.png" alt="firewalld"></p>
<p>​        2.修改Nginx配置</p>
<p>​        nginx的配置文件是/etc/nginx/nginx.conf<img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cnginxconf.png" alt="nginxconf"></p>
<p>​        原本应该在nginx.conf文件中增加server的，不知道什么原因会报错，于是我发现conf.d文件夹中的.conf文件都可以被nginx.conf调用,故我在conf.d文件夹里新建了一个php.conf文件，配置信息如下</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5Cconf.png" alt="conf"></p>
<p>​        3.配置完成后重启Nginx并设置开机自启动        </p>
<p>​        命令：systemctl start nginx</p>
<p>​                    systemctl enable nginx</p>
<h2 id="第六步：测试"><a href="#第六步：测试" class="headerlink" title="第六步：测试"></a>第六步：测试</h2><p>​        1.测试一下能否运行php代码</p>
<p>​        首先我建立了一个phpinfo.php文件在我的服务器文件夹/usr/share/nginx/html ，然后打开浏览器在地址栏输入<a href="http://127.0.0.1/phpinfo.php" target="_blank" rel="noopener">http://127.0.0.1/phpinfo.php</a> 如图可以看到代码执行成功测试通过。</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801160541.jpg" alt="QQ图片20190801160541"></p>
<p>phpinfo.php代码如下：</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801160548.png" alt="QQ图片20190801160548"></p>
<p>​        2.测试php连接mysql</p>
<p>​        <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801161007.jpg" alt="QQ图片20190801161007"></p>
<p>​        3.测试php执行mysql语句</p>
<p>​        在这部分测试中，我设计了一个添加学生成绩到数据库中的页面，如果数据库中有我添加的数据就可以证明php执行mysql成功。</p>
<p>​        <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801161346.jpg" alt="QQ图片20190801161346"></p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801161727.jpg" alt="QQ图片20190801161727"></p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5CQQ%E5%9B%BE%E7%89%8720190801161607.png" alt="QQ图片20190801161607"></p>
<p>​        可以看到数据库中存放着我输入进去的数据，测试成功。</p>
<p>index1.php代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;学生成绩表&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;a href=&quot;add.html&quot;&gt;添加成绩&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">    header(&quot;content-type:text/html;charset=utf-8&quot;);</span><br><span class="line">    </span><br><span class="line">	$servername = &quot;localhost&quot;;</span><br><span class="line">	$username = &quot;root&quot;;</span><br><span class="line">	$password = &quot;Asdfgh123!&quot;;</span><br><span class="line">	$dbName = &quot;myDB&quot;;</span><br><span class="line">	$conn= new mysqli($servername, $username, $password,$dbName);</span><br><span class="line">	if($conn-&gt;connect_error)&#123;</span><br><span class="line">	        die(&quot;Connection failed:&quot;.$conn-&gt;connect_error);</span><br><span class="line"></span><br><span class="line">	&#125; </span><br><span class="line">	mysql_select_db(&quot;myDB&quot;);</span><br><span class="line">    </span><br><span class="line">	mysql_query(&quot;set names utf8&quot;);</span><br><span class="line">    </span><br><span class="line">	$sql = &quot;select * from score1&quot;;</span><br><span class="line">    </span><br><span class="line">	$res = mysql_query($sql);</span><br><span class="line">    </span><br><span class="line">	while($data = mysql_fetch_assoc($res))&#123;</span><br><span class="line">        </span><br><span class="line">	$arr[] = $data;</span><br><span class="line">    </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; width=&quot;500&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        </span><br><span class="line">	&lt;td&gt;学号&lt;/td&gt;</span><br><span class="line">        </span><br><span class="line">	&lt;td&gt;姓名&lt;/td&gt;</span><br><span class="line">        </span><br><span class="line">	&lt;td&gt;html成绩&lt;/td&gt;</span><br><span class="line">        </span><br><span class="line">	&lt;td&gt;js成绩&lt;/td&gt;</span><br><span class="line">        </span><br><span class="line">	&lt;td&gt;操作&lt;/td&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">&lt;?php</span><br><span class="line">        </span><br><span class="line">	foreach($arr as $v)&#123;  ?&gt;</span><br><span class="line">            </span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">                </span><br><span class="line">			&lt;td&gt;&lt;?php echo $v[&quot;id&quot;]?&gt;&lt;/td&gt;</span><br><span class="line">  </span><br><span class="line">			 &lt;td&gt;&lt;?php echo $v[&quot;xuehao&quot;]?&gt;&lt;/td&gt;</span><br><span class="line">              </span><br><span class="line">			&lt;td&gt;&lt;?php echo $v[&quot;sname&quot;]?&gt;&lt;/td&gt;</span><br><span class="line">                			&lt;td&gt;&lt;?php echo $v[&quot;html&quot;]?&gt;&lt;/td&gt;</span><br><span class="line">                </span><br><span class="line">			&lt;td&gt;&lt;?php echo $v[&quot;js&quot;]?&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">			&lt;td&gt;&lt;?php echo $v[&quot;caozuo&quot;]?&gt;&lt;/td&gt;</span><br><span class="line">   </span><br><span class="line">               </span><br><span class="line">			&lt;td&gt;&lt;a href=&quot;del.php?id=&lt;?php echo $v[&quot;id&quot;]?&gt;&quot;&gt;删除&lt;/a&gt;|&lt;a href=&quot;update.php?id=&lt;?php echo $v[&quot;id&quot;]?&gt;&quot;&gt;修改&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">            		&lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">	&lt;?php    &#125;</span><br><span class="line">    </span><br><span class="line">	?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    td&#123;</span><br><span class="line">        </span><br><span class="line">		text-align: center;</span><br><span class="line">    </span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>add.html代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">    </span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    </span><br><span class="line">&lt;title&gt;添加页面&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    </span><br><span class="line">	&lt;form method=&quot;get&quot; action=&quot;add.php&quot;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;p&gt;学号：&lt;input type=&quot;text&quot; name=&quot;xuehao&quot;/&gt;&lt;/p&gt;        </span><br><span class="line">		&lt;p&gt;姓名：&lt;input type=&quot;text&quot; name=&quot;sname&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        	</span><br><span class="line">		&lt;p&gt;html成绩：&lt;input type=&quot;text&quot; name=&quot;html&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        	</span><br><span class="line">		&lt;p&gt;js成绩：&lt;input type=&quot;text&quot; name=&quot;js&quot; /&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">        		&lt;p&gt;操作：&lt;input type=&quot;text&quot; name=&quot;caozuo&quot;/&gt;&lt;/p&gt;  </span><br><span class="line">		&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;添加&quot; /&gt;&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">	&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>add.php代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line"></span><br><span class="line">        header(&quot;content-type:text/html;charset=utf-8&quot;);</span><br><span class="line">        $xuehao = $_GET[&quot;xuehao&quot;];</span><br><span class="line">        $sname = $_GET[&quot;sname&quot;];</span><br><span class="line"></span><br><span class="line">        $html = $_GET[&quot;html&quot;];</span><br><span class="line"></span><br><span class="line">        $js = $_GET[&quot;js&quot;];</span><br><span class="line">        $caozuo = $_GET[&quot;caozuo&quot;];</span><br><span class="line">        $servername = &quot;localhost&quot;;</span><br><span class="line">        $username = &quot;root&quot;;</span><br><span class="line">        $password = &quot;Asdfgh123!&quot;;</span><br><span class="line">        $dbName = &quot;myDB&quot;;</span><br><span class="line">        $conn= new mysqli($servername, $username, $password,$dbName);</span><br><span class="line">        if($conn-&gt;connect_error)&#123;</span><br><span class="line">                die(&quot;Connection failed:&quot;.$conn-&gt;connect_error);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //mysql_query(&quot;set names utf8&quot;);</span><br><span class="line"></span><br><span class="line">        $sql = &quot;INSERT INTO score1 (xuehao,sname,html,js,caozuo) values (&apos;$xuehao&apos;,&apos;$sname&apos;,&apos;$html&apos;,&apos;$js&apos;,&apos;$caozuo&apos;)&quot;;</span><br><span class="line">      //$res = mysql_query($sql);</span><br><span class="line"></span><br><span class="line">        if($conn-&gt;query($sql) === TRUE)&#123;  //插入成功后跳转到展示页面</span><br><span class="line"></span><br><span class="line">                echo &quot;&lt;script&gt;window.location.href=&apos;index1.php&apos;&lt;/script&gt;&quot;;</span><br><span class="line"> 	</span><br><span class="line">        &#125;else&#123;</span><br><span class="line"></span><br><span class="line">                echo &quot;&lt;script&gt;alert(&apos;添加失败&apos;);window.location.href=&apos;add.html&apos;&lt;/script&gt;&quot;;</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>创建数据库代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$servername = &quot;localhost&quot;;</span><br><span class="line">$username = &quot;root&quot;;</span><br><span class="line">$password =&quot;Asdfgh123!&quot;;</span><br><span class="line">$conn = new mysqli($servername,$username,$password);</span><br><span class="line">if($conn-&gt;connect_error)&#123;</span><br><span class="line">        die(&quot;Connection failed:&quot;.$conn-&gt;connect_error);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">$sql = &quot;CREATE DATABASE myDB&quot;;</span><br><span class="line">if($conn-&gt;query($sql) === TRUE)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">        echo &quot;Database created successfully&quot;;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">        echo &quot;Error creating datebase:&quot;.$conn-&gt;error;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">$conn-&gt;close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>创建数据表代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$servername = &quot;localhost&quot;;</span><br><span class="line">$username = &quot;root&quot;;</span><br><span class="line">$password = &quot;Asdfgh123!&quot;;</span><br><span class="line">$dbname = &quot;myDB&quot;;</span><br><span class="line">$conn = new mysqli($servername,$username,$password,$dbname);</span><br><span class="line">if($conn-&gt;connect_error)&#123;</span><br><span class="line">	die(&quot;Connection failed:&quot;.$conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line">$sql = &quot;CREATE TABEL score(</span><br><span class="line">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">xuehao VARCHAR(30) NOT NULL,</span><br><span class="line">sname VARCHAR(30) NOT NULL,</span><br><span class="line">html VARCHAR(30) NOT NULL,</span><br><span class="line">js VARCHAR(30) NOT NULL,</span><br><span class="line">caozuo VARCHAR(30) NOT NULL,</span><br><span class="line">reg_date TIMESTAMP)&quot;;</span><br><span class="line">if($conn-&gt;query($sql) ===TRUE)</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;Table score created successfully&quot;;</span><br><span class="line"></span><br><span class="line">&#125;else&#123;</span><br><span class="line">	echo &quot;Error creating table:&quot;.$conn-&gt;error; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">$conn-&gt;close();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="总结遇到的问题"><a href="#总结遇到的问题" class="headerlink" title="总结遇到的问题"></a>总结遇到的问题</h2><p>​        1.开放端口问题</p>
<p>​        添加指定需要开放的端口：firewall-cmd –add-port=123/tcp –permanent</p>
<p>​        重载入添加的端口：firewall-cmd –reload</p>
<p>​        查询指定端口是否开启成功：firewall-cmd –query-port=123/tcp</p>
<p>​        2.nginx无法正常启动的问题</p>
<p>​        解决方法：nginx -t可以查看配置文件的错误信息，这一步ok了重启还是有错误可以pkill -9 nginx关掉进程再重启。</p>
<h2 id="加固"><a href="#加固" class="headerlink" title="加固"></a>加固</h2><p>​        1.关闭服务器标记</p>
<p>​        如果开启的话所有的错误页面都会显示服务器的版本和信息</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA.png" alt="加固"></p>
<p>​        2.自定义缓存</p>
<p>​        设置自定义缓存用来限制缓冲区溢出攻击(写在http{server{…}})</p>
<p>​        <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA10.png" alt="加固10"></p>
<p>​        3.设置timeout来抵御DOS攻击</p>
<p>​    <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA2.png" alt="加固2"></p>
<p>​        4.配置日志</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA1.png" alt="加固1"></p>
<p>​        5.屏蔽ip</p>
<p>​        使用geoip模块封杀除制定国家以外国家的ip,可以过滤大部分来自国外的恶意扫描或者无用访问。</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA6.png" alt="加固6"></p>
<p>​        6.封杀各种user-agent（浏览器标识）</p>
<p>​        每个正常的web请求都包含用户浏览器信息，除非经过伪装恶意扫描工具，一般都会在user-agent里留下某些特征字眼，比如scan,nmap.我们用正则匹配特殊字眼来达到过滤的目的。</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA7.png" alt="加固7"></p>
<p>​        7.封杀特定的文件扩展名</p>
<p>​    <img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA8.png" alt="加固8"></p>
<p>​        8.限制访问的方法</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA5.png" alt="加固5"></p>
<p>​        9.url参数过滤敏感字</p>
<p><img src="C:%5CUsers%5CAdministrator.WIN-CL4SOICTAKG%5CDesktop%5C%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BB%BB%E5%8A%A1%5C%E5%8A%A0%E5%9B%BA9.png" alt="加固9"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/08/22/test-my-site/">
                test_my_site
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-22</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/08/22/hello-world/">
                Hello World
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-22</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>






</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2019/08/23/第一周任务/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/08/22/test-my-site/">test_my_site</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/08/22/hello-world/">Hello World</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>